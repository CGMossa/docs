<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Stan Functions Reference</title>
  <meta name="description" content="Reference for the functions defined in the Stan math library and available in the Stan programming language.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Stan Functions Reference" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Reference for the functions defined in the Stan math library and available in the Stan programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Stan Functions Reference" />
  
  <meta name="twitter:description" content="Reference for the functions defined in the Stan math library and available in the Stan programming language." />
  

<meta name="author" content="Stan Development Team">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="real-valued-arithmetic-operators.html">
<link rel="next" href="power-and-logarithm-functions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="../stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em">Stan Functions Reference</li>

<li class="divider"></li>
<li><a href="index.html#overview"><i style="font-size: 110%; padding:1.5em 0 0 0; color:#990017;">Overview</i></a></li>
<li><a href="built-in-functions.html#built-in-functions"><i style="font-size: 110%; color:#990017;">Built-In Functions</i></a></li>
<li class="chapter" data-level="1" data-path="void-functions.html"><a href="void-functions.html"><i class="fa fa-check"></i><b>1</b> Void Functions</a></li>
<li class="chapter" data-level="2" data-path="integer-valued-basic-functions.html"><a href="integer-valued-basic-functions.html"><i class="fa fa-check"></i><b>2</b> Integer-Valued Basic Functions</a></li>
<li class="chapter" data-level="3" data-path="real-valued-basic-functions.html"><a href="real-valued-basic-functions.html"><i class="fa fa-check"></i><b>3</b> Real-Valued Basic Functions</a></li>
<li class="chapter" data-level="4" data-path="array-operations.html"><a href="array-operations.html"><i class="fa fa-check"></i><b>4</b> Array Operations</a></li>
<li class="chapter" data-level="5" data-path="matrix-operations.html"><a href="matrix-operations.html"><i class="fa fa-check"></i><b>5</b> Matrix Operations</a></li>
<li class="chapter" data-level="6" data-path="sparse-matrices.html"><a href="sparse-matrices.html"><i class="fa fa-check"></i><b>6</b> Sparse Matrix Operations</a></li>
<li class="chapter" data-level="7" data-path="mixed-operations.html"><a href="mixed-operations.html"><i class="fa fa-check"></i><b>7</b> Mixed Operations</a></li>
<li class="chapter" data-level="8" data-path="compound-arithmetic-and-assignment.html"><a href="compound-arithmetic-and-assignment.html"><i class="fa fa-check"></i><b>8</b> Compound Arithmetic and Assignment</a></li>
<li class="chapter" data-level="9" data-path="higher-order-functions.html"><a href="higher-order-functions.html"><i class="fa fa-check"></i><b>9</b> Higher-Order Functions</a></li>
<li><a href="discrete-distributions.html#discrete-distributions"><i style="font-size: 110%; color:#990017;">Discrete Distributions</i></a></li>
<li class="chapter" data-level="10" data-path="conventions-for-probability-functions.html"><a href="conventions-for-probability-functions.html"><i class="fa fa-check"></i><b>10</b> Conventions for Probability Functions</a></li>
<li class="chapter" data-level="11" data-path="binary-distributions.html"><a href="binary-distributions.html"><i class="fa fa-check"></i><b>11</b> Binary Distributions</a></li>
<li class="chapter" data-level="12" data-path="bounded-discrete-distributions.html"><a href="bounded-discrete-distributions.html"><i class="fa fa-check"></i><b>12</b> Bounded Discrete Distributions</a></li>
<li class="chapter" data-level="13" data-path="unbounded-discrete-distributions.html"><a href="unbounded-discrete-distributions.html"><i class="fa fa-check"></i><b>13</b> Unbounded Discrete Distributions</a></li>
<li class="chapter" data-level="14" data-path="multivariate-discrete-distributions.html"><a href="multivariate-discrete-distributions.html"><i class="fa fa-check"></i><b>14</b> Multivariate Discrete Distributions</a></li>
<li><a href="continuous-distributions.html#continuous-distributions"><i style="font-size: 110%; color:#990017;">Continuous Distributions</i></a></li>
<li class="chapter" data-level="15" data-path="unbounded-continuous-distributions.html"><a href="unbounded-continuous-distributions.html"><i class="fa fa-check"></i><b>15</b> Unbounded Continuous Distributions</a></li>
<li class="chapter" data-level="16" data-path="positive-continuous-distributions.html"><a href="positive-continuous-distributions.html"><i class="fa fa-check"></i><b>16</b> Positive Continuous Distributions</a></li>
<li class="chapter" data-level="17" data-path="non-negative-continuous-distributions.html"><a href="non-negative-continuous-distributions.html"><i class="fa fa-check"></i><b>17</b> Non-negative Continuous Distributions</a></li>
<li class="chapter" data-level="18" data-path="positive-lower-bounded-probabilities.html"><a href="positive-lower-bounded-probabilities.html"><i class="fa fa-check"></i><b>18</b> Positive Lower-Bounded Probabilities</a></li>
<li class="chapter" data-level="19" data-path="continuous-distributions-on-0-1.html"><a href="continuous-distributions-on-0-1.html"><i class="fa fa-check"></i><b>19</b> Continuous Distributions on [0, 1]</a></li>
<li class="chapter" data-level="20" data-path="circular-distributions.html"><a href="circular-distributions.html"><i class="fa fa-check"></i><b>20</b> Circular Distributions</a></li>
<li class="chapter" data-level="21" data-path="bounded-continuous-probabilities.html"><a href="bounded-continuous-probabilities.html"><i class="fa fa-check"></i><b>21</b> Bounded Continuous Probabilities</a></li>
<li class="chapter" data-level="22" data-path="distributions-over-unbounded-vectors.html"><a href="distributions-over-unbounded-vectors.html"><i class="fa fa-check"></i><b>22</b> Distributions over Unbounded Vectors</a></li>
<li class="chapter" data-level="23" data-path="simplex-distributions.html"><a href="simplex-distributions.html"><i class="fa fa-check"></i><b>23</b> Simplex Distributions</a></li>
<li class="chapter" data-level="24" data-path="correlation-matrix-distributions.html"><a href="correlation-matrix-distributions.html"><i class="fa fa-check"></i><b>24</b> Correlation Matrix Distributions</a></li>
<li class="chapter" data-level="25" data-path="covariance-matrix-distributions.html"><a href="covariance-matrix-distributions.html"><i class="fa fa-check"></i><b>25</b> Covariance Matrix Distributions</a></li>
<li><a href="appendix.html#appendix"><i style="font-size: 110%; color:#990017;">Appendix</i></a></li>
<li class="chapter" data-level="26" data-path="math-functions.html"><a href="math-functions.html"><i class="fa fa-check"></i><b>26</b> Mathematical Functions</a></li>
<li><a href="references.html#references"><i style="font-size: 110%; color:#990017;">References</i></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Stan Functions Reference</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-functions" class="section level2">
<h2><span class="header-section-number">3.7</span> Step-like Functions</h2>
<p><em><strong>Warning:</strong></em> <em>These functions can seriously hinder sampling and
optimization efficiency for gradient-based methods (e.g., NUTS, HMC,
BFGS) if applied to parameters (including transformed parameters and
local variables in the transformed parameters or model block). The
problem is that they break gradients due to discontinuities coupled
with zero gradients elsewhere. They do not hinder sampling when
used in the data, transformed data, or generated quantities blocks.</em></p>
<div id="absolute-value-functions" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Absolute Value Functions</h3>
<!-- R; fabs; (T x); -->
<p></p>
<p><code>R</code> <strong><code>fabs</code></strong><code>(T x)</code><br>
absolute value of x</p>
<!-- real; abs; (real x); -->
<p></p>
<p><code>real</code> <strong><code>abs</code></strong><code>(real x)</code><br>
Return the absolute value of x, defined by <span class="math display">\[ \text{abs}(x) = |x| \]</span>
See the warning at start of section <a href="step-functions.html#step-functions">3.7</a> for
application to parameters.</p>
<!-- int; abs; (int x); -->
<p></p>
<p><code>int</code> <strong><code>abs</code></strong><code>(int x)</code><br>
Return the absolute value of x, defined by <span class="math display">\[ \text{abs}(x) = |x| \]</span></p>
<!-- real; fdim; (real x, real y); -->
<p></p>
<p><code>real</code> <strong><code>fdim</code></strong><code>(real x, real y)</code><br>
Return the positive difference between x and y, which is x - y if x is
greater than y and 0 otherwise; see warning at start of section
<a href="step-functions.html#step-functions">3.7</a>. <span class="math display">\[ \text{fdim}(x,y) = \begin{cases} x-y &amp;
\text{if } x \geq y \\ 0 &amp; \text{otherwise} \end{cases} \]</span></p>
</div>
<div id="bounds-functions" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Bounds Functions</h3>
<!-- real; fmin; (real x, real y); -->
<p></p>
<p><code>real</code> <strong><code>fmin</code></strong><code>(real x, real y)</code><br>
Return the minimum of x and y; see warning at start of section
<a href="step-functions.html#step-functions">3.7</a>. <span class="math display">\[ \text{fmin}(x,y) = \begin{cases} x &amp;
\text{if } x \leq y \\ y &amp; \text{otherwise} \end{cases} \]</span></p>
<!-- real; fmax; (real x, real y); -->
<p></p>
<p><code>real</code> <strong><code>fmax</code></strong><code>(real x, real y)</code><br>
Return the maximum of x and y; see warning at start of section
<a href="step-functions.html#step-functions">3.7</a>. <span class="math display">\[ \text{fmax}(x,y) = \begin{cases} x &amp;
\text{if } x \geq y \\ y &amp; \text{otherwise} \end{cases} \]</span></p>
</div>
<div id="arithmetic-functions" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Arithmetic Functions</h3>
<!-- real; fmod; (real x, real y); -->
<p></p>
<p><code>real</code> <strong><code>fmod</code></strong><code>(real x, real y)</code><br>
Return the real value remainder after dividing x by y; see warning at
start of section <a href="step-functions.html#step-functions">3.7</a>. <span class="math display">\[ \text{fmod}(x,y) = x -
\left\lfloor \frac{x}{y} \right\rfloor \, y \]</span> The operator <span class="math inline">\(\lfloor u \rfloor\)</span> is the floor operation; see below.</p>
</div>
<div id="rounding-functions" class="section level3">
<h3><span class="header-section-number">3.7.4</span> Rounding Functions</h3>
<p><em><strong>Warning:</strong></em> Rounding functions convert real values to integers.
Because the output is an integer, any gradient information resulting
from functions applied to the integer is not passed to the real value
it was derived from. With MCMC sampling using HMC or NUTS, the MCMC
acceptance procedure will correct for any error due to poor gradient
calculations, but the result is likely to be reduced acceptance
probabilities and less efficient sampling.</p>
<p>The rounding functions cannot be used as indices to arrays because
they return real values. Stan may introduce integer-valued versions
of these in the future, but as of now, there is no good workaround.</p>
<!-- R; floor; (T x); -->
<p></p>
<p><code>R</code> <strong><code>floor</code></strong><code>(T x)</code><br>
floor of x, which is the largest integer less than or equal to x,
converted to a real value; see warning at start of section
<a href="step-functions.html#step-functions">3.7</a></p>
<!-- R; ceil; (T x); -->
<p></p>
<p><code>R</code> <strong><code>ceil</code></strong><code>(T x)</code><br>
ceiling of x, which is the smallest integer greater than or equal to
x, converted to a real value; see warning at start of section
<a href="step-functions.html#step-functions">3.7</a></p>
<!-- R; round; (T x); -->
<p></p>
<p><code>R</code> <strong><code>round</code></strong><code>(T x)</code><br>
nearest integer to x, converted to a real value; see warning at start
of section <a href="step-functions.html#step-functions">3.7</a></p>
<!-- R; trunc; (T x); -->
<p></p>
<p><code>R</code> <strong><code>trunc</code></strong><code>(T x)</code><br>
integer nearest to but no larger in magnitude than x, converted to a
double value; see warning at start of section <a href="step-functions.html#step-functions">3.7</a></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="real-valued-arithmetic-operators.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="power-and-logarithm-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true,
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
