<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.1 GNU-Make Utility | CmdStan User’s Guide</title>
  <meta name="description" content="CmdStan user’s guide." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="1.1 GNU-Make Utility | CmdStan User’s Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/logo-tm.pdf" />
  <meta property="og:description" content="CmdStan user’s guide." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.1 GNU-Make Utility | CmdStan User’s Guide" />
  
  <meta name="twitter:description" content="CmdStan user’s guide." />
  <meta name="twitter:image" content="img/logo-tm.pdf" />

<meta name="author" content="Stan Development Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cmdstan-installation.html"/>
<link rel="next" href="building-cmdstan.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em"><a href="https://mc-stan.org/docs/cmdstan-guide/index.html" style="color:#4183C4">CmdStan User's Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction"><i style='font-size: 110%; color:#990017;'>Introduction</i></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Stan Home Page</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licensing"><i class="fa fa-check"></i>Licensing</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stan-documentation-users-guide-and-reference-manuals"><i class="fa fa-check"></i>Stan Documentation: User’s Guide and Reference Manuals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#benefits-of-cmdstan"><i class="fa fa-check"></i>Benefits of CmdStan</a></li>
</ul></li>
<li><a href="quickstart-guide.html#quickstart-guide"><i style='font-size: 110%; color:#990017;'>QuickStart Guide</i></a></li>
<li class="chapter" data-level="1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html"><i class="fa fa-check"></i><b>1</b> CmdStan Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="gnu-make-utility.html"><a href="gnu-make-utility.html"><i class="fa fa-check"></i><b>1.1</b> GNU-Make Utility</a></li>
<li class="chapter" data-level="1.2" data-path="building-cmdstan.html"><a href="building-cmdstan.html"><i class="fa fa-check"></i><b>1.2</b> Building CmdStan</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-model-and-data.html"><a href="example-model-and-data.html"><i class="fa fa-check"></i><b>2</b> Example Model and Data</a></li>
<li class="chapter" data-level="3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html"><i class="fa fa-check"></i><b>3</b> Compiling a Stan Program</a>
<ul>
<li class="chapter" data-level="3.1" data-path="invoking-make.html"><a href="invoking-make.html"><i class="fa fa-check"></i><b>3.1</b> Invoking <code>make</code></a></li>
<li class="chapter" data-level="3.2" data-path="errors-and-warnings.html"><a href="errors-and-warnings.html"><i class="fa fa-check"></i><b>3.2</b> Errors and Warnings</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="errors-and-warnings.html"><a href="errors-and-warnings.html#compiler-errors"><i class="fa fa-check"></i><b>3.2.1</b> Compiler Errors</a></li>
<li class="chapter" data-level="3.2.2" data-path="errors-and-warnings.html"><a href="errors-and-warnings.html#troubleshooting"><i class="fa fa-check"></i><b>3.2.2</b> Troubleshooting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mcmc-sampling.html"><a href="mcmc-sampling.html"><i class="fa fa-check"></i><b>4</b> MCMC Sampling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="running-the-sampler.html"><a href="running-the-sampler.html"><i class="fa fa-check"></i><b>4.1</b> Running the Sampler</a></li>
<li class="chapter" data-level="4.2" data-path="stan-csv-output-file.html"><a href="stan-csv-output-file.html"><i class="fa fa-check"></i><b>4.2</b> Stan CSV Output File</a></li>
<li class="chapter" data-level="4.3" data-path="summarizing-sampler-outputs-with-stansummary.html"><a href="summarizing-sampler-outputs-with-stansummary.html"><i class="fa fa-check"></i><b>4.3</b> Summarizing Sampler Output(s) with <code>stansummary</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>5</b> Optimization</a></li>
<li><a href="cmdstan-reference.html#cmdstan-reference"><i style='font-size: 110%; color:#990017;'>CmdStan Reference</i></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CmdStan User’s Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gnu-make-utility" class="section level2">
<h2><span class="header-section-number">1.1</span> GNU-Make Utility</h2>
<p>CmdStan relies on the GNU-make utility to build both the
Stan model executables and the CmdStan tools.</p>
<p>GNU-Make builds executable programs and libraries from source code by reading files
called Makefiles which specify how to derive the target program.
Makefiles consist of rules which tell how to process types of files
according to their suffix, in particular, the Stan makefile rules
specify how to process Stan program files with suffix <code>.stan</code> into
executable files.</p>
<p>Make is invoked with a list of target file names to build as command-line arguments.
Make uses the makefile rules to find the corresponding
source files. For example, to compile the Stan program <code>my_program.stan</code>,
the make target is <code>my_program</code> or <code>my_program.exe</code> (on Windows).</p>
<p>Makefile targets can be preceded by zero or more makefile variable name=value pairs.
For example to compile <code>my_program.stan</code> for an OpenCL (GPU) machine,
the makefile variable <code>STAN_OPENCL</code> is set to <code>TRUE</code>:</p>
<pre><code>&gt; make STAN_OPENCL=TRUE my_program</code></pre>
<p>Makefile variables can also be set by creating a file named <code>local</code> in the
CmdStan <code>make</code> subdirectory which contains a list of <code>&lt;VARIABLE&gt;=&lt;VALUE&gt;</code> pairs,
one per line. The complete set of makefile variables can be found in file
<code>cmdstan/stan/lib/stan_math/make/compiler_flags</code>.</p>
<p>When invoked without any arguments at all, <code>make</code> prints a help message</p>
<pre><code>--------------------------------------------------------------------------------
CmdStan v2.23.0 help

  Build CmdStan utilities:
    &gt; make build

    This target will:
    1. Install the Stan compiler bin/stanc from stanc3 binaries.
    2. Build the print utility bin/print (deprecated; will be removed in v3.0)
    3. Build the stansummary utility bin/stansummary
    4. Build the diagnose utility bin/diagnose
    5. Build all libraries and object files compile and link an executable Stan program

    Note: to build using multiple cores, use the -j option to make, e.g., 
    for 4 cores:
    &gt; make build -j4


  Build a Stan program:

    Given a Stan program at foo/bar.stan, build an executable by typing:
    &gt; make foo/bar

    This target will:
    1. Install the Stan compiler (bin/stanc or bin/stanc2), as needed.
    2. Use the Stan compiler to generate C++ code, foo/bar.hpp.
    3. Compile the C++ code using cc . to generate foo/bar

  Additional make options:
    STANCFLAGS: defaults to &quot;&quot;. These are extra options passed to bin/stanc
      when generating C++ code. If you want to allow undefined functions in the
      Stan program, either add this to make/local or the command line:
          STANCFLAGS = --allow_undefined
    USER_HEADER: when STANCFLAGS has --allow_undefined, this is the name of the
      header file that is included. This defaults to &quot;user_header.hpp&quot; in the
      directory of the Stan program.
    STANC2: When set, use bin/stanc2 to generate C++ code.


  Example - bernoulli model: examples/bernoulli/bernoulli.stan

    1. Build the model:
       &gt; make examples/bernoulli/bernoulli
    2. Run the model:
       &gt; examples/bernoulli/bernoulli sample data file=examples/bernoulli/bernoulli.data.R
    3. Look at the samples:
       &gt; bin/stansummary output.csv


  Clean CmdStan:

    Remove the built CmdStan tools:
    &gt; make clean-all

--------------------------------------------------------------------------------</code></pre>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cmdstan-installation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="building-cmdstan.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true,
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
