<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.1 GNU-Make utility | CmdStan User’s Guide</title>
  <meta name="description" content="CmdStan user’s guide." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="2.1 GNU-Make utility | CmdStan User’s Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/logo-tm.pdf" />
  <meta property="og:description" content="CmdStan user’s guide." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.1 GNU-Make utility | CmdStan User’s Guide" />
  
  <meta name="twitter:description" content="CmdStan user’s guide." />
  <meta name="twitter:image" content="img/logo-tm.pdf" />

<meta name="author" content="Stan Development Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="overview.html"/>
<link rel="next" href="build.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em"><a href="https://mc-stan.org/docs/cmdstan-guide/index.html" style="color:#4183C4">CmdStan User's Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction"><i style='font-size: 110%; color:#990017;'>Introduction</i></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Stan Home Page</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licensing"><i class="fa fa-check"></i>Licensing</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stan-documentation-users-guide-and-reference-manuals"><i class="fa fa-check"></i>Stan Documentation: User’s Guide and Reference Manuals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#benefits-of-cmdstan"><i class="fa fa-check"></i>Benefits of CmdStan</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html"><i class="fa fa-check"></i><b>1.1</b> CmdStan Installation</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#gnu-make-utility"><i class="fa fa-check"></i><b>1.1.1</b> GNU-Make Utility</a></li>
<li class="chapter" data-level="1.1.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#building-cmdstan"><i class="fa fa-check"></i><b>1.1.2</b> Building CmdStan</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="example-model-and-data.html"><a href="example-model-and-data.html"><i class="fa fa-check"></i><b>1.2</b> Example Model and Data</a></li>
<li class="chapter" data-level="1.3" data-path="compiling-the-program-bernoulli-stan.html"><a href="compiling-the-program-bernoulli-stan.html"><i class="fa fa-check"></i><b>1.3</b> Compiling the Program <code>bernoulli.stan</code></a></li>
<li class="chapter" data-level="1.4" data-path="mcmc-sampling.html"><a href="mcmc-sampling.html"><i class="fa fa-check"></i><b>1.4</b> MCMC Sampling</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="mcmc-sampling.html"><a href="mcmc-sampling.html#running-the-sampler"><i class="fa fa-check"></i><b>1.4.1</b> Running the Sampler</a></li>
<li class="chapter" data-level="1.4.2" data-path="mcmc-sampling.html"><a href="mcmc-sampling.html#stan-csv-output-file"><i class="fa fa-check"></i><b>1.4.2</b> Stan CSV Output File</a></li>
<li class="chapter" data-level="1.4.3" data-path="mcmc-sampling.html"><a href="mcmc-sampling.html#summarizing-sampler-outputs-with-stansummary"><i class="fa fa-check"></i><b>1.4.3</b> Summarizing Sampler Output(s) with <code>stansummary</code></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>1.5</b> Optimization</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="optimization.html"><a href="optimization.html#variational-inference"><i class="fa fa-check"></i><b>1.5.1</b> Variational Inference</a></li>
</ul></li>
</ul></li>
<li><a href="cmdstan-tools.html#cmdstan-tools"><i style='font-size: 110%; color:#990017;'>CmdStan Tools</i></a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a>
<ul>
<li class="chapter" data-level="2.1" data-path="gnu-make-utility-1.html"><a href="gnu-make-utility-1.html"><i class="fa fa-check"></i><b>2.1</b> GNU-Make utility</a></li>
<li class="chapter" data-level="2.2" data-path="build.html"><a href="build.html"><i class="fa fa-check"></i><b>2.2</b> Building the CmdStan Tools</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CmdStan User’s Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gnu-make-utility-1" class="section level2">
<h2><span class="header-section-number">2.1</span> GNU-Make utility</h2>
<p>GNU-Make builds executable programs and libraries from source code by reading files
called Makefiles which specify how to derive the target program.
Makefiles consist of set of rules and variables.
Make is invoked with a list of target file names to build as command-line arguments,
preceded by zero or more makefile variable settings,
e.g. a Stan program named <code>my_program.stan</code> is compiled to the corresponding
executable which can run on an OpenCL device via the following command:</p>
<pre><code>&gt; make STAN_OPENCL=TRUE my_program</code></pre>
<p>When invoked without any arguments at all, <code>make</code> prints a help message</p>
<pre><code>--------------------------------------------------------------------------------
CmdStan v2.23.0 help

  Build CmdStan utilities:
    &gt; make build

    This target will:
    1. Install the Stan compiler bin/stanc from stanc3 binaries.
    2. Build the print utility bin/print (deprecated; will be removed in v3.0)
    3. Build the stansummary utility bin/stansummary
    4. Build the diagnose utility bin/diagnose
    5. Build all libraries and object files compile and link an executable Stan program

    Note: to build using multiple cores, use the -j option to make, e.g., 
    for 4 cores:
    &gt; make build -j4


  Build a Stan program:

    Given a Stan program at foo/bar.stan, build an executable by typing:
    &gt; make foo/bar

    This target will:
    1. Install the Stan compiler (bin/stanc or bin/stanc2), as needed.
    2. Use the Stan compiler to generate C++ code, foo/bar.hpp.
    3. Compile the C++ code using cc . to generate foo/bar

  Additional make options:
    STANCFLAGS: defaults to &quot;&quot;. These are extra options passed to bin/stanc
      when generating C++ code. If you want to allow undefined functions in the
      Stan program, either add this to make/local or the command line:
          STANCFLAGS = --allow_undefined
    USER_HEADER: when STANCFLAGS has --allow_undefined, this is the name of the
      header file that is included. This defaults to &quot;user_header.hpp&quot; in the
      directory of the Stan program.
    STANC2: When set, use bin/stanc2 to generate C++ code.


  Example - bernoulli model: examples/bernoulli/bernoulli.stan

    1. Build the model:
       &gt; make examples/bernoulli/bernoulli
    2. Run the model:
       &gt; examples/bernoulli/bernoulli sample data file=examples/bernoulli/bernoulli.data.R
    3. Look at the samples:
       &gt; bin/stansummary output.csv


  Clean CmdStan:

    Remove the built CmdStan tools:
    &gt; make clean-all

--------------------------------------------------------------------------------</code></pre>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="build.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true,
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
